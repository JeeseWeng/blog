<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

**Table of Contents** _generated with [DocToc](https://github.com/thlorenz/doctoc)_

- [雅虎前端优化的 35 条军规](#%E9%9B%85%E8%99%8E%E5%89%8D%E7%AB%AF%E4%BC%98%E5%8C%96%E7%9A%84-35-%E6%9D%A1%E5%86%9B%E8%A7%84)
  - [一、内容部分](#%E4%B8%80%E5%86%85%E5%AE%B9%E9%83%A8%E5%88%86)
    - [（一）尽量减少 HTTP 请求数](#%E4%B8%80%E5%B0%BD%E9%87%8F%E5%87%8F%E5%B0%91-http-%E8%AF%B7%E6%B1%82%E6%95%B0)
    - [（二）减少 DNS 查找](#%E4%BA%8C%E5%87%8F%E5%B0%91-dns-%E6%9F%A5%E6%89%BE)
    - [（三）避免重定向](#%E4%B8%89%E9%81%BF%E5%85%8D%E9%87%8D%E5%AE%9A%E5%90%91)
    - [（四）让 Ajax 可缓存](#%E5%9B%9B%E8%AE%A9-ajax-%E5%8F%AF%E7%BC%93%E5%AD%98)
    - [（五）延迟加载组件](#%E4%BA%94%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD%E7%BB%84%E4%BB%B6)
    - [（六）预加载组件](#%E5%85%AD%E9%A2%84%E5%8A%A0%E8%BD%BD%E7%BB%84%E4%BB%B6)
    - [（七）减少 DOM 元素的数量](#%E4%B8%83%E5%87%8F%E5%B0%91-dom-%E5%85%83%E7%B4%A0%E7%9A%84%E6%95%B0%E9%87%8F)
    - [（八）跨域分离组件](#%E5%85%AB%E8%B7%A8%E5%9F%9F%E5%88%86%E7%A6%BB%E7%BB%84%E4%BB%B6)
    - [（九）尽量少用 iframe](#%E4%B9%9D%E5%B0%BD%E9%87%8F%E5%B0%91%E7%94%A8-iframe)
    - [（十）杜绝 404](#%E5%8D%81%E6%9D%9C%E7%BB%9D-404)
  - [二、CSS 部分](#%E4%BA%8Ccss-%E9%83%A8%E5%88%86)
    - [（十一）合理使用 CSS 表达式](#%E5%8D%81%E4%B8%80%E5%90%88%E7%90%86%E4%BD%BF%E7%94%A8-css-%E8%A1%A8%E8%BE%BE%E5%BC%8F)
    - [（十二）尽量选择`<link>`少用`@import`](#%E5%8D%81%E4%BA%8C%E5%B0%BD%E9%87%8F%E9%80%89%E6%8B%A9link%E5%B0%91%E7%94%A8import)
    - [（十三）避免使用滤镜](#%E5%8D%81%E4%B8%89%E9%81%BF%E5%85%8D%E4%BD%BF%E7%94%A8%E6%BB%A4%E9%95%9C)
    - [（十四）把样式表放在顶部](#%E5%8D%81%E5%9B%9B%E6%8A%8A%E6%A0%B7%E5%BC%8F%E8%A1%A8%E6%94%BE%E5%9C%A8%E9%A1%B6%E9%83%A8)
  - [三、JS 部分](#%E4%B8%89js-%E9%83%A8%E5%88%86)
    - [（十五）去除重复脚本](#%E5%8D%81%E4%BA%94%E5%8E%BB%E9%99%A4%E9%87%8D%E5%A4%8D%E8%84%9A%E6%9C%AC)
    - [（十六）尽量减少 DOM 访问](#%E5%8D%81%E5%85%AD%E5%B0%BD%E9%87%8F%E5%87%8F%E5%B0%91-dom-%E8%AE%BF%E9%97%AE)
    - [（十七）用智能的事件处理器](#%E5%8D%81%E4%B8%83%E7%94%A8%E6%99%BA%E8%83%BD%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%99%A8)
    - [（十八）把脚本放在底部](#%E5%8D%81%E5%85%AB%E6%8A%8A%E8%84%9A%E6%9C%AC%E6%94%BE%E5%9C%A8%E5%BA%95%E9%83%A8)
  - [四、JavaScript、CSS](#%E5%9B%9Bjavascriptcss)
    - [（十九）把 JavaScript 和 CSS 放到外面](#%E5%8D%81%E4%B9%9D%E6%8A%8A-javascript-%E5%92%8C-css-%E6%94%BE%E5%88%B0%E5%A4%96%E9%9D%A2)
    - [（二十）压缩 JavaScript 和 CSS](#%E4%BA%8C%E5%8D%81%E5%8E%8B%E7%BC%A9-javascript-%E5%92%8C-css)
  - [五、图片](#%E4%BA%94%E5%9B%BE%E7%89%87)
    - [（二十一）优化图片](#%E4%BA%8C%E5%8D%81%E4%B8%80%E4%BC%98%E5%8C%96%E5%9B%BE%E7%89%87)
    - [（二十二）优化 CSS Sprite](#%E4%BA%8C%E5%8D%81%E4%BA%8C%E4%BC%98%E5%8C%96-css-sprite)
    - [（二十三）不要用 HTML/CSS 缩放图片](#%E4%BA%8C%E5%8D%81%E4%B8%89%E4%B8%8D%E8%A6%81%E7%94%A8-htmlcss-%E7%BC%A9%E6%94%BE%E5%9B%BE%E7%89%87)
    - [（二十四）用小的可缓存的 favicon.ico（P.S. 收藏夹图标）](#%E4%BA%8C%E5%8D%81%E5%9B%9B%E7%94%A8%E5%B0%8F%E7%9A%84%E5%8F%AF%E7%BC%93%E5%AD%98%E7%9A%84-faviconicops-%E6%94%B6%E8%97%8F%E5%A4%B9%E5%9B%BE%E6%A0%87)
  - [六、Cookie](#%E5%85%ADcookie)
    - [（二十五）尽量减少 Cookie 的大小](#%E4%BA%8C%E5%8D%81%E4%BA%94%E5%B0%BD%E9%87%8F%E5%87%8F%E5%B0%91-cookie-%E7%9A%84%E5%A4%A7%E5%B0%8F)
    - [（二十六）把组件放在不含 Cookie 的域下](#%E4%BA%8C%E5%8D%81%E5%85%AD%E6%8A%8A%E7%BB%84%E4%BB%B6%E6%94%BE%E5%9C%A8%E4%B8%8D%E5%90%AB-cookie-%E7%9A%84%E5%9F%9F%E4%B8%8B)
  - [七、移动端](#%E4%B8%83%E7%A7%BB%E5%8A%A8%E7%AB%AF)
    - [（二十七）保证所有组件都小于 25K](#%E4%BA%8C%E5%8D%81%E4%B8%83%E4%BF%9D%E8%AF%81%E6%89%80%E6%9C%89%E7%BB%84%E4%BB%B6%E9%83%BD%E5%B0%8F%E4%BA%8E-25k)
    - [（二十八）把组件打包到一个复合文档里](#%E4%BA%8C%E5%8D%81%E5%85%AB%E6%8A%8A%E7%BB%84%E4%BB%B6%E6%89%93%E5%8C%85%E5%88%B0%E4%B8%80%E4%B8%AA%E5%A4%8D%E5%90%88%E6%96%87%E6%A1%A3%E9%87%8C)
  - [八、服务器](#%E5%85%AB%E6%9C%8D%E5%8A%A1%E5%99%A8)
    - [（二十九）Gzip 组件](#%E4%BA%8C%E5%8D%81%E4%B9%9Dgzip-%E7%BB%84%E4%BB%B6)
    - [（三十）避免图片 src 属性为空](#%E4%B8%89%E5%8D%81%E9%81%BF%E5%85%8D%E5%9B%BE%E7%89%87-src-%E5%B1%9E%E6%80%A7%E4%B8%BA%E7%A9%BA)
    - [（三十一）配置 ETags](#%E4%B8%89%E5%8D%81%E4%B8%80%E9%85%8D%E7%BD%AE-etags)
    - [（三十二）对 Ajax 用 GET 请求](#%E4%B8%89%E5%8D%81%E4%BA%8C%E5%AF%B9-ajax-%E7%94%A8-get-%E8%AF%B7%E6%B1%82)
    - [（三十三）尽早清空缓冲区](#%E4%B8%89%E5%8D%81%E4%B8%89%E5%B0%BD%E6%97%A9%E6%B8%85%E7%A9%BA%E7%BC%93%E5%86%B2%E5%8C%BA)
    - [（三十四）使用 CDN（内容分发网络）](#%E4%B8%89%E5%8D%81%E5%9B%9B%E4%BD%BF%E7%94%A8-cdn%E5%86%85%E5%AE%B9%E5%88%86%E5%8F%91%E7%BD%91%E7%BB%9C)
    - [（三十五）添上 Expires 或者 Cache-Control HTTP 请求头](#%E4%B8%89%E5%8D%81%E4%BA%94%E6%B7%BB%E4%B8%8A-expires-%E6%88%96%E8%80%85-cache-control-http-%E8%AF%B7%E6%B1%82%E5%A4%B4)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

# 雅虎前端优化的 35 条军规

参考资料：https://www.cnblogs.com/xianyulaodi/p/5755079.html

摘要：无论是在工作中，还是在面试中，web 前端性能的优化都是很重要的，那么我们进行优化需要从哪些方面入手呢？可以遵循雅虎的前端优化 35 条军规。已分类，对优化有一个比较清晰的方向。

## 一、内容部分

### （一）尽量减少 HTTP 请求数

80%的终端用户响应时间都花在了前端上，其中大部分时间都在下载页面上的各种组件：图片，样式表，脚本，Flash 等等。减少组件数必然能够减少页面提交的 HTTP 请求数。这是让页面更快的关键。

减少页面组件数的一种方式是简化页面设计。但有没有一种方法可以在构建复杂的页面同时加快响应时间呢？嗯，确实有鱼和熊掌兼得的办法。

1. **合并文件**是通过把所有脚本放在一个文件中的方式来减少请求数的，当然，也可以合并所有的 CSS。如果各个页面的脚本和样式不一样的话，合并文件就是一项比较麻烦的工作了，但把这个作为站点发布过程的一部分确实可以提高响应时间。
2. **CSS Sprites**是减少图片请求数量的首选方式。把背景图片都整合到一张图片中，然后用 CSS 的 background-image 和 background-position 属性来定位要显示的部分。
3. **图像映射**可以把多张图片合并成单张图片，总大小是一样的，但减少了请求数并加速了页面加载。图片映射只有在图像在页面中连续的时候才有用，比如导航条。给 image map 设置坐标的过程既无聊又容易出错，用 image map 来做导航也不容易，所以不推荐用这种方式。
4. **行内图片（Base64 编码）用 data**: URL 模式来把图片嵌入页面。这样会增加 HTML 文件的大小，把行内图片放在（缓存的）样式表中是个好办法，而且成功避免了页面变“重”。但目前主流浏览器并不能很好地支持行内图片。

减少页面的 HTTP 请求数是个起点，这是提升站点首次访问速度的重要指导原则。

### （二）减少 DNS 查找

### （三）避免重定向

### （四）让 Ajax 可缓存

### （五）延迟加载组件

### （六）预加载组件

### （七）减少 DOM 元素的数量

### （八）跨域分离组件

### （九）尽量少用 iframe

### （十）杜绝 404

## 二、CSS 部分

### （十一）合理使用 CSS 表达式

### （十二）尽量选择`<link>`少用`@import`

### （十三）避免使用滤镜

### （十四）把样式表放在顶部

## 三、JS 部分

### （十五）去除重复脚本

### （十六）尽量减少 DOM 访问

### （十七）用智能的事件处理器

### （十八）把脚本放在底部

## 四、JavaScript、CSS

### （十九）把 JavaScript 和 CSS 放到外面

### （二十）压缩 JavaScript 和 CSS

## 五、图片

### （二十一）优化图片

### （二十二）优化 CSS Sprite

### （二十三）不要用 HTML/CSS 缩放图片

### （二十四）用小的可缓存的 favicon.ico（P.S. 收藏夹图标）

## 六、Cookie

### （二十五）尽量减少 Cookie 的大小

### （二十六）把组件放在不含 Cookie 的域下

## 七、移动端

### （二十七）保证所有组件都小于 25K

### （二十八）把组件打包到一个复合文档里

## 八、服务器

### （二十九）Gzip 组件

### （三十）避免图片 src 属性为空

### （三十一）配置 ETags

### （三十二）对 Ajax 用 GET 请求

### （三十三）尽早清空缓冲区

### （三十四）使用 CDN（内容分发网络）

### （三十五）添上 Expires 或者 Cache-Control HTTP 请求头
